<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EtaPi moments — client-side plotting</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 18px; max-width: 1200px; margin:auto; }
    label { display:inline-block; width:140px; vertical-align:top; }
    input[type="number"], input[type="text"] { width:140px; }
    .row { margin:8px 0; }
    fieldset { margin:12px 0; padding:10px; }
    #plots { display:flex; flex-wrap:wrap; gap:12px; }
    .plotBox { flex: 1 1 360px; min-width:300px; height:320px; border:1px solid #eee; padding:8px; box-sizing:border-box; }
    #status { margin-top:10px; color:#333 }
    .download-links { margin-top:10px; }
    .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    table.params { width:100%; border-collapse: collapse; }
    table.params td, table.params th { padding:6px; vertical-align:middle; }
    table.params input[type="number"] { width:90px; }
  </style>
</head>
<body>
  <h1>EtaPi moments — client-side plotting</h1>

  <p>
    This page replaces the PHP+gnuplot flow by plotting the moments in the browser.
    The form below now exposes the resonance normalization (N_R) and spin-flip coupling (δ_R)
    for each resonance so the client-side computation receives the same set of parameters.
  </p>

  <form id="simuForm" onsubmit="return false;">
    <fieldset>
      <legend>Kinematics</legend>
      <div class="row"><label for="Eg">Eγ (GeV)</label><input id="Eg" name="Eg" type="number" step="0.01" value="8.5" /></div>
      <div class="row"><label for="t">t (GeV²)</label><input id="t" name="t" type="number" step="0.01" value="-0.1" /></div>
      <div class="row"><label for="dm">dm (GeV)</label><input id="dm" name="dm" type="number" step="0.01" value="0.02" /></div>
      <div class="row"><label>Frame</label>
        <label><input type="radio" name="FR" value="0" checked> helicity</label>
        <label><input type="radio" name="FR" value="1"> Gottfried-Jackson</label>
      </div>
    </fieldset>

    <fieldset>
      <legend>Model parameters (resonances)</legend>
      <table class="params">
        <thead>
          <tr>
            <th>Resonance</th>
            <th>mass (GeV)</th>
            <th>width (GeV)</th>
            <th>normalization N_R</th>
            <th>spin-flip δ_R</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>a0(980)</td>
            <td><input id="m0" name="m0" type="number" step="0.001" value="0.980" /></td>
            <td><input id="g0" name="g0" type="number" step="0.001" value="0.075" /></td>
            <td><input id="n0" name="n0" type="number" step="0.01" value="1.00" /></td>
            <td><input id="d0" name="d0" type="number" step="0.01" value="1.00" /></td>
          </tr>
          <tr>
            <td>π1(1600)</td>
            <td><input id="m1" name="m1" type="number" step="0.001" value="1.564" /></td>
            <td><input id="g1" name="g1" type="number" step="0.001" value="0.492" /></td>
            <td><input id="n1" name="n1" type="number" step="0.01" value="-0.03" /></td>
            <td><input id="d1" name="d1" type="number" step="0.01" value="-5.0" /></td>
          </tr>
          <tr>
            <td>a2(1320)</td>
            <td><input id="m2" name="m2" type="number" step="0.001" value="1.318" /></td>
            <td><input id="g2" name="g2" type="number" step="0.001" value="0.107" /></td>
            <td><input id="n2" name="n2" type="number" step="0.01" value="-0.11" /></td>
            <td><input id="d2" name="d2" type="number" step="0.01" value="-2.0" /></td>
          </tr>
          <tr>
            <td>a2(1700)</td>
            <td><input id="m2p" name="m2p" type="number" step="0.001" value="1.722" /></td>
            <td><input id="g2p" name="g2p" type="number" step="0.001" value="0.247" /></td>
            <td><input id="n2p" name="n2p" type="number" step="0.01" value="-0.04" /></td>
            <td><input id="d2p" name="d2p" type="number" step="0.01" value="-2.0" /></td>
          </tr>
        </tbody>
      </table>
    </fieldset>

    <div class="controls">
      <button id="startBtn" type="button">Start (compute & plot)</button>
      <button type="reset">Reset</button>
      <div id="status">Idle</div>
    </div>
  </form>

  <div class="download-links" id="downloads"></div>

  <h2>Moments plots</h2>
  <div id="plots"></div>

  <!-- Use bundle produced by the ported JS core.
       If you saved the bundle as app.bundle.js place it in the same folder as this HTML.
       If you prefer to keep the file named app.js, rename the bundle to app.js instead. -->
  <script src="app.bundle.js"></script>
</body>
</html>
