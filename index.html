<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EtaPi moments — client-side plotting</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 18px; max-width: 1200px; margin:auto; }
    label { display:inline-block; width:140px; vertical-align:top; }
    input[type="number"], input[type="text"] { width:140px; }
    .row { margin:8px 0; }
    fieldset { margin:12px 0; padding:10px; }
    #plots { display:flex; flex-wrap:wrap; gap:12px; }
    .plotBox { flex: 1 1 360px; min-width:300px; height:320px; border:1px solid #eee; padding:8px; box-sizing:border-box; }
    #status { margin-top:10px; color:#333 }
    .download-links { margin-top:10px; }
    .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
  </style>
</head>
<body>
  <h1>EtaPi moments — client-side plotting</h1>

  <p>
    This page replaces the PHP+gnuplot flow by plotting the moments in the browser.
    It uses the same input fields as the PHP form. Currently the plotting routine reads numeric files
    (moment0.txt, moment1.txt, BA.txt) from the repository when no compute routine is available.
    I will plug a real client-side compute routine (pure JS or WASM) on request so results change with the inputs.
  </p>

  <form id="simuForm" onsubmit="return false;">
    <fieldset>
      <legend>Kinematics</legend>
      <div class="row"><label for="Eg">Eγ (GeV)</label><input id="Eg" name="Eg" type="number" step="0.01" value="8.5" /></div>
      <div class="row"><label for="t">t (GeV²)</label><input id="t" name="t" type="number" step="0.01" value="-0.1" /></div>
      <div class="row"><label for="dm">dm (GeV)</label><input id="dm" name="dm" type="number" step="0.01" value="0.02" /></div>
      <div class="row"><label>Frame</label>
        <label><input type="radio" name="FR" value="0" checked> helicity</label>
        <label><input type="radio" name="FR" value="1"> Gottfried-Jackson</label>
      </div>
    </fieldset>

    <fieldset>
      <legend>Model parameters (resonances)</legend>
      <div class="row">
        <label>m0 (a0)</label><input id="m0" name="m0" type="number" step="0.001" value="0.980" />
        <label>g0</label><input id="g0" name="g0" type="number" step="0.001" value="0.075" />
      </div>
      <div class="row">
        <label>m1 (π1)</label><input id="m1" name="m1" type="number" step="0.001" value="1.564" />
        <label>g1</label><input id="g1" name="g1" type="number" step="0.001" value="0.492" />
      </div>
      <div class="row">
        <label>m2 (a2)</label><input id="m2" name="m2" type="number" step="0.001" value="1.318" />
        <label>g2</label><input id="g2" name="g2" type="number" step="0.001" value="0.107" />
      </div>
      <div class="row">
        <label>m2p (a2')</label><input id="m2p" name="m2p" type="number" step="0.001" value="1.722" />
        <label>g2p</label><input id="g2p" name="g2p" type="number" step="0.001" value="0.247" />
      </div>
    </fieldset>

    <div class="controls">
      <button id="startBtn" type="button">Start (compute & plot)</button>
      <button type="reset">Reset</button>
      <div id="status">Idle</div>
    </div>
  </form>

  <div class="download-links" id="downloads"></div>

  <h2>Moments plots</h2>
  <div id="plots"></div>

  <script src="app.js"></script>
</body>
</html>
